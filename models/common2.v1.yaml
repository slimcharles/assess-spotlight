openapi: '3.0.0'
info:
  title: Common Schema, Parameters and Security
  contact:
    name: API Integrations
    url: 'https://developer.globalpay.com/?gp-api=true'
    email: api.integrations@globalpay.com
  version: 2020 10 22
servers:
  - url: 'https://apis.sandbox.globalpay.com/ucp'
    description: Sandbox Environment
  - url: 'https://apis.globalpay.com/ucp'
    description: Production Environment
paths: {}
components:
  schemas: ## Schema Section
    ####A
    access_token:
      type: string
      description: The access token that can be used to executed API actions.
        A unique identifier generated by Global Payments to identify the merchant.
      example: 'N3sHC8I6G3SGs2YRBDnDUS3Hx2ET'
      minLength: 1
      maxLength: 50

    access_token.type:
      type: string
      description: The type of token created.
      example: 'Bearer'
      minLength: 1
      maxLength: 50

    account_id:
      type: string
      description: A unique identifier for the merchant account set by Global
        Payments.
      example: 'TRA_6716058969854a48b33347043ff8225f'
      minLength: 1
      maxLength: 50

    account_name:
      type: string
      description: A meaningful label for the merchant account set by Global
        Payments.
      example: 'Transaction_Processing'
      minLength: 1
      maxLength: 50
    
    aggregation_model:
      type: string
      description: Indicates how a merchant's payment processing activity across Sales, Refunds, Disputes and Fees is structured for a Deposit. Activity can be aggregated into one daily amount or all activity separately funded via different deposits.
      example: 'NET'
      enum:
      - NET
      - TRANSACTIONS-DISPUTES-FEES
      - SEPARATE
    
    app_id:
        type: string
        description: The id of the app that was used to create the token.
        example: 'i9R0byBBor6RqTQNj3g4MuVBwH5rd7yR'
        minLength: 1
        maxLength: 50

    app_name:
      type: string
      description: The name of the app the user gave to the application.
      example: 'demo_app'
      minLength: 1
      maxLength: 50
    
    #### B
    bank.code:
      type: string
      description: The local identifier code for the bank.


    #### C
    country:
      type: string
      description: The country in ISO-3166-1(alpha-2 code) format.
      example: 'US'
    
    count:
      type: number
      description: The total number of items.
      example: 123

    currency:
      type: string
      description: The currency of the amount in ISO-4217(alpha-3)
      example: 'USD'
    
    #### D  
    deposit.amount:
      type: string
      description: The amount of the Deposit that affects the merchant's bank account. It is always represented in the lowest denomiation of the related currency.
      example: '134999'


    #### E
    email:
      type: string
      description: 'Email registered with the application that was used to access this token. '
      example: 'james.mason@example.com'
      minLength: 1
      maxLength: 50
    
    #### F
    funding_type:
      type: string
      description: Indicates if the amount relates to a Debit or Credit to the merchant's bank account.
      example: 'CREDIT'
      enum:
      - DEBIT
      - CREDIT

    from_time_created:
      description: The start time to search for in a range, using the resource time_created value.
      type: string
      format: date
      example: '2020-11-11'
   
      
    #### G
    grant_type:
      type: string
      description: Indicates the type of access being requested.
      enum: [client_credentials]
      example: 'client_credentials'

    #### I
    id:
      type: string
      description: A unique identifier for the object created by Global Payments. The first 3 characters identifies the resource the instance relates to.
      example: 'ABC_6716058969854a48b33347043ff8225f'
      minLength: 1
      maxLength: 50
    
    interval_to_expire:
      type: string
      description: |
        The time interval set for when the token will expire.
      enum:
      - WEEK
      - DAY
      - 12_HOURS
      - 6_HOURS
      - 3_HOURS
      - 1_HOUR
      - 30_MINUTES
      - 10_MINUTES
      - 5_MINUTES

    #### M
    masked_account_number_last4:
      type: string
      description: The last 4 characters of the local reference for a bank account number.
      minLength: 1
      maxLength: 50
    
    merchant_id:
      type: string
      description: A unique identifier for the merchant set by Global Payments.
      example: MER_c4c0df11039c48a9b63701adeaa296c3
      minLength: 1
      maxLength: 50
    
    merchant_name:
      type: string
      description: A meaningful label for the merchant set by Global Payments.
      example: Sandbox_merchant_2
      minLength: 1
      maxLength: 50

    #### N    
    nonce:
      type: string
      description: A unique random value included while creating the secret.
      example: 'random_string'
      minLength: 1
      maxLength: 50

    #### P
    pagination.total_record_count:
      type: number
      description: The total number of records across all pages for the search filter. When searching for a collection of resoures, this is returned on the first page only and when the date range is a month or less.
      example: 3412
        
    pagination.current_page_size:
      type: number
      description: The total number of records returned on the current page. If current_page_size is less than the page_size using in the querystring then this is the final page for that search.
      example: 3412

    pagination.page:
      description: Indicates the page sequence to return in the response. The number of records presented on each page is determined by page_size field.
      maximum: 1000
      minimum: 1
      type: number
      default: 1    
    
    pagination.page_size:
      description: The total number of objects to return in a single page for that list.
      maximum: 1000
      minimum: 1
      type: number
      default: 5
    
    pagination.order_by:
      description: 'The value to order the entire list by. '
      type: string
      enum:
      - TIME_CREATED
    
    pagination.order:
      description: The direction of the ordering of the entire list, ASC or DESC
      type: string
      enum:
      - ASC
      - DESC

    permissions:
      type: array
      items:
        type: string
        description: The list of the permissions the integrator want the access token to have. This is used to limit the authority a specific access token can have.
        example: TRN_POST_Authorize      

    #### R
    result_code:
      type: string
      description: The result of the action executed.
      enum:
        - SUCCESS
        - DECLINE

    #### S
    seconds_to_expire:
      type: integer
      description: |
        The time left in seconds before the token expires.
      maximum: 604799
      example: 604799

    secret:
      type: string
      description: A unique string created using the nonce and app-key. This value
        is used to further authenticate the request. Created as follows - SHA512(NONCE.APP-KEY).
      example: e776ce1d9e94d5072ee132258e446cd92668d7c28b2e475a345319b475ba601956c16e3983926ce279db6301d78b7f47cfb729e41b4169814e373f0a0bf38716
      minLength: 1
      maxLength: 128

    status:
      type: string
      description: Indicates where a resource object is in it's lifecylce.
      example: 'FUNDED'
      

    system.mid:
      type: string
      description: Merchant Identifier 
      example: '11112334'
      minLength: 1
      maxLength: 50
        
    system.tid:
      type: string
      description: Terminal Identifier.
      example: '22229876'
      minLength: 1
      maxLength: 50
    
    system.hierarchy:
      type: string
      description: Identifies the location of a merchant identifier within the
            merchant's hierarchical structure.
      example: '000-00-000-000-000'
      minLength: 1
      maxLength: 50
    
    system.name:
      type: string
      description: The merchant name that is associated with the merchant.
      example: 'MERCHANT ABC INC.'
      minLength: 1
      maxLength: 100
    
    system.dba:
      type: string
      description: The alternate name the merchant may be known as.
      example: 'MERCHANT XYZ INC.'
      minLength: 1
      maxLength: 100
      

    #### T
    time_created:
      type: string
      format: date-time
      description: Global Payments time indicating when the object was created in ISO-8601 format.
      example: 2020-05-03T21:23:39.718Z

    to_time_created:
      description: The end time to search for in a range, using the resource time_created value.
      type: string
      format: date
      example: '2020-11-11'

    transaction.amount:
      type: string
      description:  The amount to transfer between Payer and Merchant for a SALE or a REFUND. It is always represented in the lowest denomiation of the related currency.
      example: '11099'
   
    transaction.gratuity_amount:
      type: string
      description: The amount of the gratuity for a transaction.It is always represented in the lowest denomiation of the related currency.
      example: '1999'

    transaction.cashback_amount:
      type: string
      description: The amount of the transaction that relates to cashback.It is always represented in the lowest denomiation of the related currency.
      example: '2000'
    
    transaction.surcharge_amount:
      type: string
      description: The amount that reflects the additional charge the merchant applied to the transaction for using a specific payment method.It is always represented in the lowest denomiation of the related currency.
      example: '150'
    
    transaction.convenience_amount:
      type: string
      description: The amount that reflects the charge the merchant applied to the transaction for availing of a more convenient purchase.It is always represented in the lowest denomiation of the related currency.
      example: '120'

    total_amount:
      type: string
      description: The total amount across one or more items.
      example: '120'

       


       
#################################       
    totals:
      type: object
      description: The total number of records and the total amount across those records.
      properties:
        count:
          $ref: '#/components/schemas/count'
        amount:
          $ref: '#/components/schemas/total_amount'
      
    bank_transfer:
      type: object
      properties:
        masked_account_number_last4:
          type: string
          description: The last 4 characters of the local reference for a bank account
            number.
        bank:
          $ref: '#/components/schemas/bank'
      description: Data relating to a bank transfer directly to or from the Payer's
        bank account.
    
    bank:
      type: object
      properties:
        code:
          $ref: '#/components/schemas/bank.code'
    
    filter:
      type: object
      description: Indicates what fields and values used to filter the current list of resource objects in the current response.
    
    paging:
      type: object
      description: The paging values used to generate this response.
      properties:
        page:
          $ref: '#/components/schemas/pagination.page'
        page_size:
          $ref: '#/components/schemas/pagination.page_size'
        order_by:
          $ref: '#/components/schemas/pagination.order_by'
        order:
          $ref: '#/components/schemas/pagination.order'
     
    scope:
      type: object
      properties:
        merchant_id:
          $ref: '#/components/schemas/merchant_id'
        merchant_name:
          $ref: '#/components/schemas/merchant_name'
        accounts:
          $ref: '#/components/schemas/accounts'
    
    accounts:
      type: array
      items:
        type: object
        properties:
          account_id:
            $ref: '#/components/schemas/account_id'
          account_name:
            $ref: '#/components/schemas/account_name'
          permissions:
            type: array
            items:
              $ref: '#/components/schemas/permissions'
    system:
      type: object
      description: Configuration relating to a transactions from the Global Payments system. This info is relevant for troubleshooting and integrators using other Global Payments systems to payment process.
      properties:
        mid:
           $ref: '#/components/schemas/system.mid'
        tid:
          $ref: '#/components/schemas/system.tid'
        hierarchy:
          $ref: '#/components/schemas/system.hierarchy'
        name:
          $ref: '#/components/schemas/system.name'
        dba:
          $ref: '#/components/schemas/system.dba'

    action:
      type: object
      description: Information about the Action executed.
      properties:
        id:
          $ref: '#/components/schemas/id'
        type:
          type: string
          description: Indicates the action taken.
          example: DEPOSIT_LIST
          enum:
          - DEPOSIT_LIST
          - DEPOSIT_SINGLE
        time_created:
           $ref: '#/components/schemas/time_created'
        result_code:
           $ref: '#/components/schemas/result_code'
        app_id:
          $ref: '#/components/schemas/app_id'
        app_name:
          $ref: '#/components/schemas/app_name'
  
  
  ################ Parameters Section ################ 
  parameters:      
    header_Accept:
      in: header
      name: Accept
      description: Expected format of the response message.
      schema:
        type: string
        default: application/json

    header_Accept-Encoding:
      name: Accept-Encoding
      in: header
      description: Compression algorithm user can accept in the response to this request.
      schema:
        type: string
        default: gzip
    
    header_Content-Encoding:
      name: Accept-Encoding
      in: header
      description: Compression algorithm user can accept in the response to this request.
      schema:
        type: string
        default: gzip
      
    header_Authorization:
      in: header
      name: Authorization
      description: The Bearer token used when executing this action.
      required: true
      schema:
        type: string
        default: Bearer MECaTYne0ch1VX2byAPZiJHhq6bc

    header_Content-type:
      in: header
      name: Content-type
      description: Format of the message.
      required: true
      schema:
        type: string
        default: 'application/json'
    
    header_X-GP-Version:
      name: X-GP-Version
      in: header
      description: Indicates the version of the GP-API for this message.
      required: true
      schema:
        type: string
        default: '2020-04-10'

    header_X-GP-Idempotency:
      name: X-GP-Idempotency
      in: header
      description: Integrator generated value submitted in the request header that is checked to ensure the same value has not been seen in the last 24 hours. It is used to ensure idempotency is maintained with this action.
      schema:
        type: string
        minLength: 1
        maxLength: 50
    
    #### QueryParameters Section
    query_pagination_page:
      in: query
      name: page
      description: Indicates the page sequence to return in the response. The number of records presented on each page is determined by page_size field.
      schema:
        $ref: '#/components/schemas/pagination.page'
    
    query_pagination_page_size:
      in: query
      name: page_size
      description: The total number of objects to return in a single page for that list
      schema:
        $ref: '#/components/schemas/pagination.page_size'
    
    query_pagination_order_by:
      in: query
      name: order_by
      description: 'The value to order the entire list by. '
      schema:
        $ref: '#/components/schemas/pagination.order_by'
    
    query_pagination_order:
      in: query
      name: order
      description: The direction of the ordering of the entire list, ASC or DESC
      schema:
        $ref: '#/components/schemas/pagination.order'
  

## Security Section
  securitySchemes:  ## Security Section
    BearerAuth:
      type: http
      scheme: bearer
