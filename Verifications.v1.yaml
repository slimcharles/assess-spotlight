openapi: 3.0.1
info:
  title: Verifications
  description: Verifications represent the validation of a payment method to ensure it can be used in the creation of a Transaction.
  contact:
    name: 'API Integrations'
    url: 'https://developer.globalpay.com/?gp-api=true'
    email: 'api.integrations@globalpay.com'
  version: '2020 10 22'
servers:
  - url: 'https://apis.sandbox.globalpay.com/ucp'
    description: Sandbox Environment
  - url: 'https://apis.globalpay.com/ucp'
    description: Production Environment
tags:
  - name: Verify
    description: Verify a payment method to ensure it can be used to create a Transaction at a later time.

  
paths:
  /transactions:
    post:
      operationId: createSaleOrRefundTransaction
      tags:
      - Create
      summary: Create a Sale or Refund transaction that attempts to transfer funds between the Payer and the Merchant using a specific Payment Method. The transaction can be flagged for automatic capture or flagged as requiring a separate capture action later.
      description: Create a Sale or Refund transaction that attempts to transfer funds between the Payer and the Merchant using a specific Payment Method. The transaction can be flagged for automatic capture or flagged as requiring a separate capture action later.

      parameters:
      - $ref: ./models/parameters.v1.yaml#/components/parameters/header_Authorization      
      - $ref: ./models/parameters.v1.yaml#/components/parameters/header_X-GP-Idempotency
      - $ref: ./models/parameters.v1.yaml#/components/parameters/header_X-GP-Version
      - $ref: ./models/parameters.v1.yaml#/components/parameters/header_Accept
      - $ref: ./models/parameters.v1.yaml#/components/parameters/header_Content-Type
      
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/create_request'
        required: true
        
            
      responses:
        '200':
          description: OK
          headers:
            Content-Type:
              $ref: ./models/data_dictionary.v1.yaml#/components/schemas/Content-Type      
            Content-Encoding:  
              $ref: ./models/data_dictionary.v1.yaml#/components/schemas/Content-Encoding
            X-GP-Idempotency:  
              $ref: ./models/data_dictionary.v1.yaml#/components/schemas/X-GP-Idempotency
            X-GP-Version:  
              $ref: ./models/data_dictionary.v1.yaml#/components/schemas/X-GP-Version
          
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/create_response'
        '400':
          $ref: ./models/errors.yaml#/components/responses/RequestInvalid_400

        '401':
          $ref: ./models/errors.yaml#/components/responses/AuthenticationInvalid_401

        '403':
          $ref: ./models/errors.yaml#/components/responses/NotAuthorized_403

        '404':
          description: Resource Not Found
          content: {}

        '500':
          $ref: ./models/errors.yaml#/components/responses/ServerError_500

        '501':
          $ref: ./models/errors.yaml#/components/responses/UnknownServerError_501

        '502':
          $ref: ./models/errors.yaml#/components/responses/UnknownPlatformError_502

        '504':
          $ref: ./models/errors.yaml#/components/responses/ServerTimeout_504

        x-codegen-request-body-name: request
    
    
components:
  schemas:

    create_request:
      required:
      - account_name
      - channel
      - currency
      - country
      - payment_method
      - reference

      type: object
      properties:
        account_name:
          $ref: ./models/data_dictionary.v1.yaml#/components/schemas/account_name
      
        channel:
          $ref: ./models/data_dictionary.v1.yaml#/components/schemas/transaction.channel
        
        currency:
          $ref: ./models/data_dictionary.v1.yaml#/components/schemas/currency

        reference:
          $ref: ./models/data_dictionary.v1.yaml#/components/schemas/transaction.reference
        
        country:
          $ref: ./models/data_dictionary.v1.yaml#/components/schemas/country

        payment_method:
          $ref: Transactions-2020-10-22.v1.yaml#/components/schemas/payment_method_request
              
    create_response:
      type: object
      properties:
        id:
          $ref: ./models/data_dictionary.v1.yaml#/components/schemas/verification.id

        time_created:
          $ref: ./models/data_dictionary.v1.yaml#/components/schemas/time_created

        status:
          $ref: ./models/data_dictionary.v1.yaml#/components/schemas/verification.status          
          
        channel:
          $ref: ./models/data_dictionary.v1.yaml#/components/schemas/transaction.channel

        currency:
          $ref: ./models/data_dictionary.v1.yaml#/components/schemas/currency
        
        country:
          $ref: ./models/data_dictionary.v1.yaml#/components/schemas/country
    
        merchant_id:
          $ref: ./models/data_dictionary.v1.yaml#/components/schemas/merchant_id
        merchant_name:
          $ref: ./models/data_dictionary.v1.yaml#/components/schemas/merchant_name
        account_id:
          $ref: ./models/data_dictionary.v1.yaml#/components/schemas/account_id
        account_name:
          $ref: ./models/data_dictionary.v1.yaml#/components/schemas/account_name
        
        reference:
          $ref: ./models/data_dictionary.v1.yaml#/components/schemas/transaction.reference
                                                             
      
       
        payment_method:
          $ref: 'Transactions-2020-10-22.v1.yaml#/components/schemas/payment_method_response'
             
        action:
          $ref: ./models/schema_objects.v1.yaml#/components/schemas/action
    
   